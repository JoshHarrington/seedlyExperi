var PAGE;!function(e){"use strict";PAGE=function(){function n(){var n=e(".masonryContainer");n.imagesLoaded(function(){n.masonry({columnWidth:".column",gutter:".gutter",itemSelector:"section"})})}function t(){e(".search .query").click(function(){e(this).selectText()})}function c(){e(".search .clear").click(function(){e(".search .query").empty().focus()})}function a(){function n(){var n=e(".search input").val();if(""!=n){s.push(n),i=[],r=[];for(var t in s)i.push(s[t]),r.push('<span contenteditable="false" class="tag">'+s[t]+"</span>");e(".search input").val("")}o()}function t(){e(".search .query").on("focus",function(){i=[],r=[];for(var e in s)i.push(s[e]),r.push('<span contenteditable="false" class="tag">'+s[e]+"</span>");console.log(s+" tags - tagsReplacedInSearch"),console.log(i+" tagSearch - tagsReplacedInSearch"),console.log(r+" tagReplace - tagsReplacedInSearch")}),e(".search .query").keyup(function(){for(var n in i)e(this).replaceText(i[n],r[n])})}e(".search button").mousedown(function(){n()}),e(".search input").keypress(function(e){13==e.which&&n()}),t()}function o(){var n=s.toString().split(",").join(", ");e(".currentTags").text(n)}e.fn.selectText=function(){var e,n,t=document,c=this[0];t.body.createTextRange?(e=document.body.createTextRange(),e.moveToElementText(c),e.select()):window.getSelection&&(n=window.getSelection(),e=document.createRange(),e.selectNodeContents(c),n.removeAllRanges(),n.addRange(e))};var s=["charity","conference"],i=[],r=[];return{init:function(){n(),t(),c(),a(),o()}}}(),e(function(){PAGE.init()})}(jQuery);